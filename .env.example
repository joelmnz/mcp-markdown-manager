# Authentication token for all interfaces (REST API, MCP server, Web UI)
AUTH_TOKEN=your-secret-token-here

# Application configuration
NODE_ENV=production
PORT=5000
INTERNAL_PORT=5000
DATA_DIR=./data
HOST_DATA_DIR=./data

# Enable/disable MCP server (case insensitive: true/True/TRUE)
MCP_SERVER_ENABLED=true

# Database configuration (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_INTERNAL_PORT=5432
DB_NAME=article_manager
DB_USER=article_user
DB_PASSWORD=your-database-password-here
DB_SSL=false

# Database connection pool settings
DB_MAX_CONNECTIONS=100
APP_DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# Database URL (alternative to individual DB_* variables)
# DATABASE_URL=postgresql://article_user:password@localhost:5432/article_manager

# Database health check settings
DB_HEALTH_CHECK_INTERVAL=30000
DB_CONSTRAINT_REPAIR_ENABLED=true

# PostgreSQL performance tuning
DB_SHARED_BUFFERS=256MB
DB_EFFECTIVE_CACHE_SIZE=1GB
DB_MAINTENANCE_WORK_MEM=64MB
DB_CHECKPOINT_COMPLETION_TARGET=0.9
DB_WAL_BUFFERS=16MB
DB_DEFAULT_STATISTICS_TARGET=100

# Docker container configuration
POSTGRES_IMAGE=pgvector/pgvector:pg16
POSTGRES_CONTAINER_NAME=mcp-markdown-postgres
POSTGRES_INITDB_ARGS=--auth-host=scram-sha-256
APP_IMAGE=ghcr.io/joelmnz/mcp-markdown-manager:latest
APP_CONTAINER_NAME=mcp-markdown-manager
RESTART_POLICY=unless-stopped

# Health check configuration
HEALTH_CHECK_INTERVAL=10s
HEALTH_CHECK_TIMEOUT=5s
HEALTH_CHECK_RETRIES=5
APP_HEALTH_CHECK_INTERVAL=30s
APP_HEALTH_CHECK_TIMEOUT=3s
APP_HEALTH_CHECK_RETRIES=3
APP_HEALTH_CHECK_START_PERIOD=10s

# Semantic search configuration
SEMANTIC_SEARCH_ENABLED=false
EMBEDDING_PROVIDER=ollama
EMBEDDING_MODEL=nomic-embed-text
OLLAMA_BASE_URL=http://host.docker.internal:11434
OPENAI_API_KEY=
CHUNK_SIZE=500
CHUNK_OVERLAP=50

# Backup configuration
BACKUP_DIR=./backups
RETENTION_DAYS=30
COMPRESS_BACKUPS=true
BACKUP_PREFIX=article-manager

# Production data path (for docker-compose.prod.yml)
POSTGRES_DATA_PATH=./postgres-data

# Production-specific configuration (docker-compose.prod.yml)
PROD_NODE_ENV=production
PROD_INTERNAL_PORT=5000
PROD_MCP_SERVER_ENABLED=true
PROD_DB_HOST=postgres
PROD_DB_INTERNAL_PORT=5432
PROD_DB_SSL=false
PROD_APP_DB_MAX_CONNECTIONS=50
PROD_DB_IDLE_TIMEOUT=60000
PROD_DB_CONNECTION_TIMEOUT=5000
PROD_DB_HEALTH_CHECK_INTERVAL=60000
PROD_DB_CONSTRAINT_REPAIR_ENABLED=true
PROD_LOG_LEVEL=info
PROD_LOG_FORMAT=json
PROD_LOG_DIR=./logs
PROD_SEMANTIC_SEARCH_ENABLED=false
PROD_OLLAMA_BASE_URL=http://host.docker.internal:11434

# Production PostgreSQL performance tuning
PROD_DB_MAX_CONNECTIONS=200
PROD_DB_SHARED_BUFFERS=512MB
PROD_DB_EFFECTIVE_CACHE_SIZE=2GB
PROD_DB_MAINTENANCE_WORK_MEM=128MB
PROD_DB_CHECKPOINT_COMPLETION_TARGET=0.9
PROD_DB_WAL_BUFFERS=32MB
PROD_DB_DEFAULT_STATISTICS_TARGET=100
PROD_DB_RANDOM_PAGE_COST=1.1
PROD_DB_EFFECTIVE_IO_CONCURRENCY=200
PROD_DB_WORK_MEM=4MB
PROD_DB_MIN_WAL_SIZE=1GB
PROD_DB_MAX_WAL_SIZE=4GB
PROD_DB_MAX_WORKER_PROCESSES=8
PROD_DB_MAX_PARALLEL_WORKERS_PER_GATHER=4
PROD_DB_MAX_PARALLEL_WORKERS=8
PROD_DB_MAX_PARALLEL_MAINTENANCE_WORKERS=4

# Production health check settings
PROD_HEALTH_CHECK_INTERVAL=30s
PROD_HEALTH_CHECK_TIMEOUT=10s
PROD_HEALTH_CHECK_RETRIES=3
PROD_HEALTH_CHECK_START_PERIOD=60s
PROD_APP_HEALTH_CHECK_INTERVAL=60s
PROD_APP_HEALTH_CHECK_TIMEOUT=10s
PROD_APP_HEALTH_CHECK_RETRIES=3
PROD_APP_HEALTH_CHECK_START_PERIOD=30s

# Production container configuration
PROD_APP_IMAGE=ghcr.io/joelmnz/mcp-markdown-manager:latest
PROD_POSTGRES_INITDB_ARGS=--auth-host=scram-sha-256 --auth-local=scram-sha-256

# Backup service configuration
BACKUP_IMAGE=postgres:16-alpine
BACKUP_CONTAINER_NAME=mcp-markdown-backup
BACKUP_DB_HOST=postgres
BACKUP_DB_PORT=5432
BACKUP_CONTAINER_DIR=/backups
BACKUP_SCHEDULE=0 2 * * *

# Monitoring configuration (optional)
MONITORING_POSTGRES_EXPORTER_IMAGE=prometheuscommunity/postgres-exporter:latest
MONITORING_POSTGRES_EXPORTER_CONTAINER=mcp-markdown-postgres-exporter
MONITORING_POSTGRES_EXPORTER_PORT=9187
MONITORING_DB_HOST=postgres
MONITORING_DB_PORT=5432
MONITORING_RESTART_POLICY=unless-stopped
